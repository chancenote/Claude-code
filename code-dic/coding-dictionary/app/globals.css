@tailwind base;
@tailwind components;
@tailwind utilities;

/* ── Design Tokens (Role-Based) ── */
@layer base {
  :root {
    --surface: #FFFFFF;
    --surface-secondary: #F8FAFC;
    --surface-elevated: #FFFFFF;
    --text-primary: #0F172A;
    --text-secondary: #475569;
    --text-tertiary: #94A3B8;
    --border: #E2E8F0;
    --border-strong: #CBD5E1;
    --accent: #2563EB;
    --accent-soft: rgba(37, 99, 235, 0.12);
    --accent-hover: #1D4ED8;
    --code-bg: #1E293B;
    --code-text: #E2E8F0;
    /* Tags */
    --tag-blue: #2563EB;
    --tag-blue-bg: #EFF6FF;
    --tag-green: #059669;
    --tag-green-bg: #ECFDF5;
    --tag-purple: #7C3AED;
    --tag-purple-bg: #F5F3FF;
    --tag-orange: #EA580C;
    --tag-orange-bg: #FFF7ED;
  }

  .dark {
    --surface: #0F172A;
    --surface-secondary: #1E293B;
    --surface-elevated: #1E293B;
    --text-primary: #F1F5F9;
    --text-secondary: #94A3B8;
    --text-tertiary: #64748B;
    --border: #334155;
    --border-strong: #475569;
    --accent: #60A5FA;
    --accent-soft: rgba(96, 165, 250, 0.15);
    --accent-hover: #93C5FD;
    --code-bg: #020617;
    --code-text: #E2E8F0;
    --tag-blue: #60A5FA;
    --tag-blue-bg: rgba(37, 99, 235, 0.15);
    --tag-green: #34D399;
    --tag-green-bg: rgba(5, 150, 105, 0.15);
    --tag-purple: #A78BFA;
    --tag-purple-bg: rgba(124, 58, 237, 0.15);
    --tag-orange: #FB923C;
    --tag-orange-bg: rgba(234, 88, 12, 0.15);
  }

  body {
    @apply bg-surface text-text-primary transition-colors duration-200;
    font-feature-settings: "ss01", "ss02", "cv01";
  }

  /* Reduce Motion */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

/* ── Component Classes ── */
@layer components {
  /* Skeleton loader */
  .skeleton {
    @apply rounded-xl;
    background: linear-gradient(90deg, var(--surface-secondary) 0%, var(--surface) 50%, var(--surface-secondary) 100%);
    background-size: 200% 100%;
    animation: shimmer 1.8s ease-in-out infinite;
  }

  /* Toast notification */
  .toast {
    @apply fixed bottom-6 left-1/2 -translate-x-1/2 px-5 py-3 rounded-2xl shadow-elevated text-white text-caption font-medium z-50;
    animation: slideUp 0.3s ease-out, fadeOutToast 0.3s ease-in 2.7s forwards;
  }

  /* Focus ring */
  .focus-ring {
    @apply outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 focus-visible:ring-offset-surface;
  }

  /* Card base */
  .card {
    @apply bg-surface-elevated rounded-3xl border border-border shadow-card transition-all duration-200;
  }
  .card-interactive {
    @apply card hover:shadow-card-hover hover:border-border-strong;
  }

  /* Tag styles */
  .tag {
    @apply inline-flex items-center px-2.5 py-1 text-micro rounded-full font-medium transition-colors;
  }
  .tag-기본개념 { @apply text-tag-blue bg-tag-blue-bg; }
  .tag-웹개발 { @apply text-tag-green bg-tag-green-bg; }
  .tag-데이터AI { @apply text-tag-purple bg-tag-purple-bg; }
  .tag-AI검색 { @apply text-tag-orange bg-tag-orange-bg; }

  /* Kbd (keyboard shortcut) */
  .kbd {
    @apply inline-flex items-center justify-center h-5 min-w-[1.25rem] px-1.5 text-[0.65rem] font-mono font-medium rounded bg-surface-secondary border border-border text-text-tertiary;
  }
}

/* ── Keyframes ── */
@keyframes fadeOutToast {
  from { opacity: 1; }
  to { opacity: 0; pointer-events: none; }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* ── Code blocks ── */
pre {
  @apply rounded-2xl text-sm leading-relaxed overflow-x-auto;
  background: var(--code-bg) !important;
  color: var(--code-text);
}
pre code {
  @apply text-caption leading-relaxed font-mono;
}

/* ── Scrollbar ── */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { @apply bg-transparent; }
::-webkit-scrollbar-thumb { @apply bg-border rounded-full; }
::-webkit-scrollbar-thumb:hover { @apply bg-border-strong; }

/* ── Selection ── */
::selection {
  background: var(--accent-soft);
  color: var(--text-primary);
}
